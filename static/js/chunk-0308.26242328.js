(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0308"],{"0AoE":function(e,t,s){"use strict";var o=s("SXkE");s.n(o).a},40:function(e,t){},41:function(e,t){},"6ure":function(e,t,s){"use strict";var o=s("fKcG");s.n(o).a},"CE4/":function(e,t,s){"use strict";var o=s("nAx8"),a=s("USwo"),n=s("CYMq"),r=s("xMGN"),i=s("bS86"),c=s("0WpP"),u=s("SkeG"),l=s("I90/");a(a.S+a.F*!s("h3Hq")(function(e){Array.from(e)}),"Array",{from:function(e){var t,s,a,M,g=n(e),d="function"==typeof this?this:Array,h=arguments.length,p=h>1?arguments[1]:void 0,w=void 0!==p,f=0,y=l(g);if(w&&(p=o(p,h>2?arguments[2]:void 0,2)),void 0==y||d==Array&&i(y))for(s=new d(t=c(g.length));t>f;f++)u(s,f,w?p(g[f],f):g[f]);else for(M=y.call(g),s=new d;!(a=M.next()).done;f++)u(s,f,w?r(M,p,[a.value,f],!0):a.value);return s.length=f,s}})},LMX9:function(e,t,s){"use strict";var o=s("N1PA");s.n(o).a},N1PA:function(e,t,s){},PvFb:function(e,t,s){},RrJT:function(e,t,s){},SXkE:function(e,t,s){},SkeG:function(e,t,s){"use strict";var o=s("GhSp"),a=s("ENu8");e.exports=function(e,t,s){t in e?o.f(e,t,a(0,s)):e[t]=s}},TE6o:function(e,t,s){"use strict";var o=s("PvFb");s.n(o).a},clIN:function(e,t,s){"use strict";var o=s("RrJT");s.n(o).a},er4n:function(e,t,s){"use strict";s.r(t);var o=s("P2sY"),a=s.n(o),n=s("m1cH"),r=s.n(n),i=s("zrg5"),c=s("L2JU"),u={name:"app",computed:Object(c.c)({products:"getAllProducts",length:"getNumberOfProducts"}),methods:Object(c.b)(["addToCart"])},l=(s("LMX9"),s("KHd+")),M=Object(l.a)(u,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"products"}},[s("h2",[e._v("All Products")]),e._v(" "),s("p",[e._v(e._s(e.length)+" products")]),e._v(" "),s("el-row",{attrs:{gutter:12}},e._l(e.products,function(t){return s("el-col",{key:t.data.id,attrs:{span:8}},[s("el-card",{attrs:{shadow:"hover"}},[s("h3",[e._v("Title: "+e._s(t.data.title))]),e._v(" "),s("p",[e._v(e._s(t.data.desc))]),e._v(" "),s("p",[e._v("Price: "+e._s(t.data.price)+"€")]),e._v(" "),s("el-button",{attrs:{type:"primary",round:""},on:{click:function(s){e.addToCart(t)}}},[e._v("Add to cart")])],1)],1)}))],1)},[],!1,null,null,null);M.options.__file="productList.vue";var g={name:"Storefront",components:{ProductList:M.exports},data:function(){return{connected:!1,form:{root:""}}},methods:{onSubmit:function(){var e=this;console.log("submit!",this.form),console.log("store!",this.$store),console.log("store2!",this.$store.state.shop.shop),this.$store.dispatch("FetchShopDetails",this.form.root).then(function(){console.log("store3!",e.$store.state.shop.shop),console.log("new shop loaded")})}}},d=(s("TE6o"),Object(l.a)(g,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"storefront"},[s("div",{staticClass:"div1",attrs:{bgcolor:"#28222C"}},[e._v("\n      \n    "),s("center",[s("h1",[s("font",{attrs:{color:"#409EFF"}},[e._v("Online Marketplace Application Demo")])],1),e._v(" "),s("br"),e._v(" "),s("br"),e._v(" "),s("a",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:"#products",expression:"'#products'"}],staticClass:"discover",attrs:{href:"#"}},[e._v("Discover more")])]),e._v(" "),e._v("\n      \n        \n      "),s("center",[e.connected?s("div",[s("h2",{attrs:{color:"#FFFFFF"}},[e._v("You are connected to store:")]),e._v(" "),e.$store.state.shop.shop.data?s("strong",[e._v(e._s(e.$store.state.shop.shop.data.name))]):e._e()]):s("div",[s("p",[e._v("not connected")])])]),e._v(" "),s("p",[s("center",[s("font",{attrs:{color:"#FFFFFF"}},[e._v("Connect to another shop?")])],1)],1),e._v(" "),s("el-form",{attrs:{"label-position":e.top,model:e.form}},[s("el-row",[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"grid-content bg-purple-dark"})])],1),e._v(" "),s("el-main",[s("div",{staticClass:"form_wrapper"},[s("el-form-item",{attrs:{label:"Paste shop address"}},[s("el-input",{staticClass:"shop_input",attrs:{autofocus:"",placeholder:"Shop address"},model:{value:e.form.root,callback:function(t){e.$set(e.form,"root",t)},expression:"form.root"}})],1)],1)])],1),e._v(" "),s("ProductList")],1),e._v(" "),s("img",{staticClass:"wave",attrs:{src:"/src/assets/wave.svg"}})])},[],!1,null,null,null));d.options.__file="index.vue";var h=d.exports,p=s("nsc6"),w=[{type:"text",author:"me",id:0,data:{text:"Why don't they have salsa on the table?"}},{type:"text",author:"mattmezza",id:1,data:{text:"What do you need salsa for?"}},{type:"text",author:"me",id:2,data:{text:"Salsa is now the number one condiment in America."}},{type:"text",author:"mattmezza",id:3,data:{text:"You know why? Because people like to say 'salsa.' 'Excuse me, do you have salsa?' 'We need more salsa.' 'Where is the salsa? No salsa?'"}},{type:"text",author:"me",id:4,data:{text:"You know it must be impossible for a Spanish person to order seltzer and not get salsa. 'I wanted seltzer, not salsa.'"}},{type:"text",author:"mattmezza",id:5,data:{text:"Don't you know the difference between seltzer and salsa?? You have the seltezer after the salsa!"}},{type:"text",author:"me",id:6,data:{text:"See, this should be a show. This is the show. "}},{type:"text",author:"mattmezza",id:7,data:{text:"What?"}},{type:"text",author:"me",id:8,data:{text:"This. Just talking."}},{type:"text",author:"mattmezza",id:9,data:{text:"Yeah, right."}},{type:"text",author:"me",id:10,data:{text:"I'm really serious. I think that's a good idea. "}},{type:"text",author:"mattmezza",id:11,data:{text:"Just talking? Well what's the show about?"}},{type:"text",author:"me",id:12,data:{text:"It's about nothing."}},{type:"text",author:"mattmezza",id:100,data:{text:"No story?"}},{type:"system",id:13,data:{text:"You have been transferred to another operator",meta:"04-07-2018 15:57"}},{type:"file",author:"support",id:14,data:{text:"No forget the story. ",file:{name:"awesome",url:"https://media.giphy.com/media/dkGhBWE3SyzXW/giphy.gif"}}},{type:"file",author:"me",id:15,data:{text:"What about this one instead?? ",file:{url:"http://www.quickmeme.com/img/2d/2d95cc80f9a2a2578a8f632eebecddcc1c12e5b08ab85f81a5d401670d5f36c1.jpg"},meta:"✓✓ Read"}},{type:"text",author:"support",id:16,data:{text:"You've got to have a story. You've got to have a story. You've got to have a story. You've got to have a story. You've got to have a story. You've got to have a story. "}},{type:"emoji",author:"me",id:17,data:{emoji:"😋"}},{type:"text",author:"me",id:18,data:{text:"Do you read me...",meta:"✓✓ Read"}},{type:"text",author:"me",id:19,data:{text:"...or not?",meta:"✓ Delivered"}},{type:"system",id:20,data:{text:"User changed security key",meta:"04-08-2018 15:57"}},{type:"text",author:"support",id:21,data:{text:"What about suggestions?"},suggestions:["Looks good!","It's OK.","Uhh.. Do I really have to say something?","This suggestion is way too long for css purpose. Let's make it long... Longer, and more and more.. Never ending."]}],f=[{id:"mattmezza",name:"Matteo",imageUrl:"https://avatars3.githubusercontent.com/u/1915989?s=230&v=4"},{id:"support",name:"Support",imageUrl:"https://avatars3.githubusercontent.com/u/37018832?s=200&v=4"}],y={red:{header:{bg:"#D32F2F",text:"#fff"},launcher:{bg:"#D32F2F"},messageList:{bg:"#fff"},sentMessage:{bg:"#F44336",text:"#fff"},receivedMessage:{bg:"#eaeaea",text:"#222222"},userInput:{bg:"#fff",text:"#212121"}},green:{header:{bg:"#388E3C",text:"#fff"},launcher:{bg:"#388E3C"},messageList:{bg:"#fff"},sentMessage:{bg:"#4CAF50",text:"#fff"},receivedMessage:{bg:"#eaeaea",text:"#222222"},userInput:{bg:"#fff",text:"#212121"}},blue:{header:{bg:"#4e8cff",text:"#ffffff"},launcher:{bg:"#4e8cff"},messageList:{bg:"#ffffff"},sentMessage:{bg:"#4e8cff",text:"#ffffff"},receivedMessage:{bg:"#eaeaea",text:"#222222"},userInput:{bg:"#f4f7f9",text:"#565867"}},dark:{header:{bg:"#34495e",text:"#ecf0f1"},launcher:{bg:"#34495e"},messageList:{bg:"#2c3e50"},sentMessage:{bg:"#7f8c8d",text:"#ecf0f1"},receivedMessage:{bg:"#95a5a6",text:"#ecf0f1"},userInput:{bg:"#34495e",text:"#ecf0f1"}}};console.log("chatParticipants",f),console.log("availableColors",y);var m={name:"home",components:{NavBar:i.a,Storefront:h,ConnectionHandler:p.a},data:function(){return{activeNames:["1","2","3"],participants:f,titleImageUrl:"https://a.slack-edge.com/66f9/img/avatars-teams/ava_0001-34.png",messageList:w,newMessagesCount:0,isChatOpen:!1,showTypingIndicator:"",colors:null,availableColors:y,chosenColor:null,alwaysScrollToBottom:!0,messageStyling:!0,userIsTyping:!1,scopedProps:{messageText:"lalala",messageColors:{},message:{data:{meta:"wthat meta?"}}}}},methods:{handleChange:function(e){console.log(e)},sendMessage:function(e){e.length>0&&(this.newMessagesCount=this.isChatOpen?this.newMessagesCount:this.newMessagesCount+1,this.onMessageWasSent({author:"support",type:"text",id:Math.random(),data:{text:e}}))},handleTyping:function(e){this.showTypingIndicator=e.length>0?this.participants[this.participants.length-1].id:""},onMessageWasSent:function(e){this.messageList=[].concat(r()(this.messageList),[a()({},e,{id:Math.random()})])},openChat:function(){console.log("openChat"),this.isChatOpen=!0,this.newMessagesCount=0},closeChat:function(){this.isChatOpen=!1},setColor:function(e){this.colors=this.availableColors[e],this.chosenColor=e},showStylingInfo:function(){this.$modal.show("dialog",{title:"Info",text:"You can use *word* to <strong>boldify</strong>, /word/ to <em>emphasize</em>, _word_ to <u>underline</u>, `code` to <code>write = code;</code>, ~this~ to <del>delete</del> and ^sup^ or ¡sub¡ to write <sup>sup</sup> and <sub>sub</sub>"})},messageStylingToggled:function(e){this.messageStyling=e.target.checked},handleOnType:function(){this.$root.$emit("onType"),this.userIsTyping=!0},editMessage:function(e){var t=this.messageList.find(function(t){return t.id===e.id});t.isEdited=!0,t.data.text=e.data.text},removeMessage:function(e){if(confirm("Delete?")){var t=this.messageList.find(function(t){return t.id===e.id});t.type="system",t.data.text="This message has been removed"}},like:function(e){var t=this.messageList.findIndex(function(t){return t.id===e}),s=this.messageList[t];s.liked=!s.liked,this.$set(this.messageList,t,s)}},computed:{linkColor:function(){return console.log("this.colors"),"dark"===this.chosenColor?this.colors.sentMessage.text:this.colors.launcher.bg},backgroundColor:function(){return"dark"===this.chosenColor?this.colors.messageList.bg:"#fff"}},mounted:function(){console.log("mounted",this.colors),console.log("participants",this.participants),console.log("messageList",this.messageList),this.messageList.forEach(function(e){return e.liked=!1})},created:function(){this.setColor("blue")}},D=(s("clIN"),Object(l.a)(m,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[s("nav-bar"),e._v(" "),s("Storefront"),e._v(" "),s("oma-chat",{attrs:{alwaysScrollToBottom:e.alwaysScrollToBottom,close:e.closeChat,colors:e.colors,isOpen:e.isChatOpen,messageList:e.messageList,messageStyling:e.messageStyling,newMessagesCount:e.newMessagesCount,onMessageWasSent:e.onMessageWasSent,open:e.openChat,participants:e.participants,showCloseButton:!0,showLauncher:!0,showEmoji:!0,showFile:!0,showTypingIndicator:e.showTypingIndicator,titleImageUrl:e.titleImageUrl},on:{onType:e.handleOnType,edit:e.editMessage,remove:e.removeMessage}},[[e.scopedProps.me||"text"!==e.scopedProps.message.type?e._e():s("button",{on:{click:function(t){t.preventDefault(),e.like(e.scopedProps.message.id)}}},[e._v("\n        👍\n      ")])],e._v(" "),[s("p",{staticClass:"sc-message--text-content",domProps:{innerHTML:e._s(e.scopedProps.messageText)}}),e._v(" "),e.scopedProps.message.data.meta?s("p",{staticClass:"sc-message--meta",style:{color:e.scopedProps.messageColors.color}},[e._v(e._s(e.scopedProps.message.data.meta))]):e._e(),e._v(" "),e.scopedProps.message.isEdited||e.scopedProps.message.liked?s("p",{staticClass:"sc-message--edited"},[e.scopedProps.message.isEdited?[e._v("✎")]:e._e(),e._v(" "),e.scopedProps.message.liked?[e._v("👍")]:e._e()],2):e._e()]],2)],1)},[],!1,null,null,null));D.options.__file="index.vue";t.default=D.exports},fKcG:function(e,t,s){},m1cH:function(e,t,s){"use strict";t.__esModule=!0;var o=function(e){return e&&e.__esModule?e:{default:e}}(s("rfXi"));t.default=function(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return(0,o.default)(e)}},mxmt:function(e,t){e.exports="data:image/svg+xml;base64,PDw8PDw8PCBIRUFECjw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04IiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAzMjAgMzIwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zOnNlcmlmPSJodHRwOi8vd3d3LnNlcmlmLmNvbS8iIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MjsiPgogICAgPGcgaWQ9IkViZW5lXzIiPgogICAgICAgIDxnIGlkPSJFYmVuZV8xLTIiPgogICAgICAgICAgICA8cGF0aCBkPSJNMjY2LDEyMC42N0wyNjYsMTMwLjY3QzI1OC43OTEsMTI0LjExOCAyNDkuMzkxLDEyMC40ODUgMjM5LjY1LDEyMC40ODVDMjE4LjE1NiwxMjAuNDg1IDIwMC40NywxMzguMTcyIDIwMC40NywxNTkuNjY1QzIwMC40NywxNjkuMzk5IDIwNC4wOTcsMTc4Ljc5MyAyMTAuNjQsMTg2TDE5Ny4yNywxODZDMTk0LjUyNywxODYgMTkyLjI3LDE4My43NDMgMTkyLjI3LDE4MUwxOTIuMjcsMTIwLjY3TDE3OS4yNSwxMjAuNjdMMTcwLjU0LDEzMy43M0wxNjYuMTgsMTQwLjI3TDE2MS44MywxNDYuOEMxNjEuMzQ2LDE0Ny41MTEgMTYwLjU0LDE0Ny45MzggMTU5LjY4LDE0Ny45MzhDMTU4LjgyLDE0Ny45MzggMTU4LjAxNCwxNDcuNTExIDE1Ny41MywxNDYuOEwxNTMuMTcsMTQwLjI3TDE0OC44NywxMzMuNzNMMTQwLjE2LDEyMC42N0wxMjcsMTIwLjY3TDEyNywxODFDMTI3LDE4My43NDMgMTI0Ljc0MywxODYgMTIyLDE4NkwxMDguODEsMTg2QzExNS4yNDgsMTc4LjgxMSAxMTguODEsMTY5LjQ5MyAxMTguODEsMTU5Ljg0M0MxMTguODEsMTM4LjMzMyAxMDEuMTEsMTIwLjYzMyA3OS42LDEyMC42MzNDNTguMDksMTIwLjYzMyA0MC4zOSwxMzguMzMzIDQwLjM5LDE1OS44NDNDNDAuMzksMTY5LjQ5MyA0My45NTIsMTc4LjgxMSA1MC4zOSwxODZMNDAuMzksMTg2TDQwLjM5LDE5OS4wN0w2Ni41MywxOTkuMDdMNjYuNTMsMTgyLjQ5QzU4LjQ1OCwxNzcuODI3IDUzLjQ3LDE2OS4xODUgNTMuNDcsMTU5Ljg2NEM1My40NywxNDUuNTI5IDY1LjI2NiwxMzMuNzM0IDc5LjYsMTMzLjczNEM5My45MzQsMTMzLjczNCAxMDUuNzMsMTQ1LjUyOSAxMDUuNzMsMTU5Ljg2NEMxMDUuNzMsMTY5LjE4NSAxMDAuNzQyLDE3Ny44MjcgOTIuNjcsMTgyLjQ5TDkyLjY3LDE5OS4wN0wxMjcsMTk5LjA3QzEzNC4xNjIsMTk5LjA1OSAxNDAuMDUsMTkzLjE2MiAxNDAuMDUsMTg2TDE0MC4wNSwxNDMuNDlMMTQ0LjQxLDE1MC4wM0wxNTMuMTIsMTYzLjA5TDE1Ny41MiwxNjkuMzFDMTU4LjAwMiwxNzAuMDIgMTU4LjgwNSwxNzAuNDQ2IDE1OS42NjMsMTcwLjQ0NkMxNjAuMTg3LDE3MC40NDYgMTYwLjY5OCwxNzAuMjg3IDE2MS4xMywxNjkuOTlDMTYxLjQwMiwxNjkuODExIDE2MS42MzcsMTY5LjU4IDE2MS44MiwxNjkuMzFMMTY2LjIyLDE2My4wOUwxNzQuOTMsMTUwTDE3OS4yOCwxNDMuNDZMMTc5LjI4LDE4NkMxNzkuMjgxLDE4OC4xNzQgMTc5LjgyMSwxOTAuMzE1IDE4MC44NSwxOTIuMjNDMTgxLjA2LDE5Mi41OSAxODEuMjcsMTkyLjk2IDE4MS41MSwxOTMuM0MxODEuOTgyLDE5My45OTUgMTgyLjUxOCwxOTQuNjQ0IDE4My4xMSwxOTUuMjRDMTgzLjk5OCwxOTYuMTI5IDE4NS4wMDgsMTk2Ljg4NiAxODYuMTEsMTk3LjQ5QzE4Ni44NTEsMTk3LjkwNyAxODcuNjM2LDE5OC4yNDMgMTg4LjQ1LDE5OC40OUMxODkuNzA4LDE5OC44ODkgMTkxLjAyLDE5OS4wOTEgMTkyLjM0LDE5OS4wOUwyMzkuODQsMTk5LjA5QzI0NC4yOTEsMTk5LjA5MiAyNDguNzExLDE5OC4zMzggMjUyLjkxLDE5Ni44NkMyNTUuMTc5LDE5Ni4wNjcgMjU3LjM2OSwxOTUuMDYzIDI1OS40NSwxOTMuODZMMjU5LjQ1LDE3Ny4xNUMyNTcuNTc1LDE3OS4yODUgMjU1LjM2NiwxODEuMTAyIDI1Mi45MSwxODIuNTNDMjQ4Ljk0MywxODQuODQgMjQ0LjQzLDE4Ni4wNDkgMjM5Ljg0LDE4Ni4wM0MyMzkuODIyLDE4Ni4wMyAyMzkuODA0LDE4Ni4wMyAyMzkuNzg2LDE4Ni4wM0MyMjUuNDQ2LDE4Ni4wMyAyMTMuNjQ2LDE3NC4yMyAyMTMuNjQ2LDE1OS44OUMyMTMuNjQ2LDE0NS41NSAyMjUuNDQ2LDEzMy43NSAyMzkuNzg2LDEzMy43NUMyNDkuMTE4LDEzMy43NSAyNTcuNzY4LDEzOC43NDcgMjYyLjQzLDE0Ni44M0MyNjQuNzQsMTUwLjc5NyAyNjUuOTQ5LDE1NS4zMSAyNjUuOTMsMTU5LjlMMjY1LjkzLDE5OS4xTDI3OSwxOTkuMUwyNzksMTIwLjdMMjY2LDEyMC42N1oiIHN0eWxlPSJmaWxsOnJnYig2NCwxNTgsMjU1KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPgo9PT09PT09CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTEyOC43NiAzNzEuMTkiPjxnIGlkPSJFYmVuZV8yIiBkYXRhLW5hbWU9IkViZW5lIDIiPjxnIGlkPSJFYmVuZV8xLTIiIGRhdGEtbmFtZT0iRWJlbmUgMSI+PHBhdGggZmlsbD0iIzQwOWVmZiIgZD0iTTEwNjcsLjE4VjQ3LjQ0Yy03Ni4xOS02OC4zNS0xOTMuMzYtNjItMjYxLjcxLDE0LjE5YTE4NS4zNSwxODUuMzUsMCwwLDAsLjA3LDI0Ny42SDcxOC41OFYuMThINjU2Ljg3TDYxNS42Niw2MmwtMjAuNiwzMC45M0w1NzQuNDUsMTIzLjhhMTIuMzgsMTIuMzgsMCwwLDEtMjAuMzUsMGgwTDUzMy41LDkyLjkyLDUxMy4xNSw2Miw0NzEuOTQuMThINDA5LjYzVjMwOS4yM2gtODZDMzkyLDIzMi45MiwzODUuNTMsMTE1LjY1LDMwOS4yMiw0Ny4zMVMxMTUuNjUtMTQuNTcsNDcuMzEsNjEuNzRhMTg1LjQ5LDE4NS40OSwwLDAsMCwwLDI0Ny40OUguMDVWMzcxSDEyMy42N3YtNzguNGExMjMuNjIsMTIzLjYyLDAsMSwxLDEyMy42MiwwVjM3MUg0MDkuNjNhNjEuODIsNjEuODIsMCwwLDAsNjEuODEtNjEuODFoMFYxMDguMTNMNDkyLDEzOS4wNmw0MS4yMSw2MS44MSwyMC44LDI5LjRhMTIuMywxMi4zLDAsMCwwLDIwLjM1LDBsMjAuODEtMjkuNCw0MS4yMS02MS44MUw2NTcsMTA4LjEzdjIwMS4xYTYxLjY3LDYxLjY3LDAsMCwwLDcuNDMsMjkuNDVjMSwxLjczLDIsMy40NiwzLjEsNS4wOWE2Mi43Myw2Mi43MywwLDAsMCw3LjU4LDkuMTYsNjEsNjEsMCwwLDAsMTQuMjQsMTAuNjMsNTYuNCw1Ni40LDAsMCwwLDExLDQuNjgsNjEuNSw2MS41LDAsMCwwLDE4LjQyLDIuOGgyMjQuN2ExODUuNTUsMTg1LjU1LDAsMCwwLDYxLjgxLTEwLjUzLDE4MC4yNywxODAuMjcsMCwwLDAsMzAuOTMtMTQuM1YyNjcuMzZhMTIzLjU1LDEyMy41NSwwLDAsMS0zMC45MywyNS40MywxMjIsMTIyLDAsMCwxLTYxLjgxLDE2LjU5aDBBMTIzLjYyLDEyMy42MiwwLDEsMSwxMDUwLjM3LDEyNCwxMjIuMSwxMjIuMSwwLDAsMSwxMDY3LDE4NS43NlYzNzEuMTloNjEuODFWLjMzWiIvPjwvZz48L2c+PC9zdmc+Cj4+Pj4+Pj4gZmM1YWJlODUzNDI5MmUyZWM4NmZkYWE4YWVlMzVkMDJiZTQwMzdiMgo="},myGB:function(e,t,s){s("C5kU"),s("CE4/"),e.exports=s("VSTI").Array.from},nsc6:function(e,t,s){"use strict";var o=s("gDS+"),a=s.n(o),n=s("4d7F"),r=s.n(n),i=s("14Xm"),c=s.n(i),u=s("D3Ub"),l=s.n(u),M=s("F8hq"),g=s("fcXd"),d=(s("t+wR"),s("lMCj")),h=function(){var e=l()(c.a.mark(function e(t,s){var o,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=Object(M.asciiToTrytes)(a()(t)),n=d.create(s,o),e.next=5,d.attach(n.payload,n.address,3,10);case 5:return e.abrupt("return",{root:n.root,state:n.state});case 8:return e.prev=8,e.t0=e.catch(0),console.log("publish error",e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,void 0,[[0,8]])}));return function(t,s){return e.apply(this,arguments)}}(),p=function(e,t){console.log("readStream:: (seed, key)",e,t);var s=d.init(g.a,e,2);console.log("state_object",s),s=d.changeMode(s,"restricted",t);var o=d.getRoot(s);return console.log("root",o),new r.a(function(){var e=l()(c.a.mark(function e(a,n){var r,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("state_object",s),r=void 0,i=function(e){console.log("convertData",e);var t=JSON.parse(Object(M.trytesToAscii)(e));console.log("result",t),r=t},e.next=6,d.fetch(o,"restricted",t,i);case 6:return console.log("offer",r),e.abrupt("return",a(r));case 10:return e.prev=10,e.t0=e.catch(0),console.log("createMAMChannel error",e.t0),e.abrupt("return",n());case 14:case"end":return e.stop()}},e,void 0,[[0,10]])}));return function(t,s){return e.apply(this,arguments)}}())},w=s("Wj4w"),f=s("BRrH"),y={data:function(){return{creating:!1,peer:null,answer:!1,connection_url:"",offer:"",waiting_for_connection:!1,seed:"",loading:!1,connected:!0,messages:[],new_message:""}},created:function(){var e=this;console.log("connector started"),console.log("Seed",this.$route.query.seed);var t=this.$route.query.seed;if(t){this.peer=new f({initiator:!1,trickle:!1}),this.peer.on("data",function(t){console.log("got a message from peer1: "+t);var s=String.fromCharCode.apply(null,t);console.log("got a message from peer1 -converted: "+s),e.messages.push(s)});var s=this.$route.query.key;console.log("Key",s),p(t,s).then(function(o){if(console.log("data",o),"offer"===o.type){console.log("its an offer!"),console.log("sucess getConnectionData ",o);var n=e;e.peer.signal(o),e.peer.on("signal",function(e){console.log("data peer2",e),"answer"===e.type&&(function(e,t,s){return console.log("createAnswer(seed, key, answer)",e,t,s),new r.a(function(){var o=l()(c.a.mark(function o(a,n){var r,i;return c.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=d.init(g.a,e,2),console.log("state_object",r),r=d.changeMode(r,"restricted",t),console.log("state_object",r),o.prev=4,console.log("plublish mam..."),o.next=8,h(s,r);case 8:return i=o.sent,console.log("mam plublish!"),i&&(i.root=i.root,i.secretKey=i.state.channel.secretKey,i.next_root=i.state.channel.next_root,i.start=i.state.channel.start),o.abrupt("return",a(i));case 14:return o.prev=14,o.t0=o.catch(4),console.log("MAM append error",o.t0),o.abrupt("return",n());case 18:case"end":return o.stop()}},o,void 0,[[4,14]])}));return function(e,t){return o.apply(this,arguments)}}())}(t,s,e).then(function(e){console.log("createAnswer ",e)}).catch(function(e){console.log("err getConnectionData ",e)}),n.answer=a()(e))})}}).catch(function(e){console.log("err getConnectionData ",e)})}else console.log("no seed providet "),this.creating=!0,this.answer=""},methods:{createOffer:function(){var e=this;this.peer=new f({initiator:!0,trickle:!1}),console.log("peer",this.peer),this.loading=!0;var t=this;this.peer.on("signal",function(e){if(console.log("data",e),"offer"===e.type){t.seed=Object(w.j)();t.connection_url="http://localhost:9528/#/connection?seed="+t.seed+"&key=H",console.log("SEED",t.seed),this.waiting_for_connection=!0,function(e,t,s){var o=d.init(g.a,e,2);return o=d.changeMode(o,"restricted",t),new r.a(function(){var t=l()(c.a.mark(function t(a,n){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h(s,o);case 3:return(r=t.sent)&&(s.root=r.root,s.secretKey=r.state.channel.secretKey,s.next_root=r.state.channel.next_root,s.start=r.state.channel.start,s.seed=e),t.abrupt("return",a(s));case 8:return t.prev=8,t.t0=t.catch(0),console.log("createMAMChannel error",t.t0),t.abrupt("return",n());case 12:case"end":return t.stop()}},t,void 0,[[0,8]])}));return function(e,s){return t.apply(this,arguments)}}())}(t.seed,"H",e).then(function(e){console.log("sucess createWebRTC ",e),console.log("sucess root ",e.root),t.startWatcher(e.root)}).catch(function(e){console.log("err createWebRTC ",e)}),t.offer=a()(e)}}),this.peer.on("data",function(t){console.log("got a message from peer2: "+t);var s=String.fromCharCode.apply(null,t);console.log("got a message from peer2 -converted: "+s),e.messages.push(s)})},sendMessage:function(){this.peer.send(this.new_message)},startWatcher:function(e){var t=this;this.watcher=setInterval(function(){console.log("read stream from seed: ",this.seed),p(this.seed,"H").then(function(e){console.log("sucess createWebRTC ",e),e?"answer"===e.type?(console.log("answer found!",e),console.log("connect!"),console.log("peer",t.peer),t.peer.signal(e),t.peer.on("connect",function(){console.log("connected!!!"),t.connected=!0,t.peer.send("hey peer2, how is it going?")}),t.loading=!0,clearInterval(t.watcher)):"offer"===e.type?console.log("Data still in offer",e):console.log("something went wront",e):console.log("No new data found:",e)}).catch(function(e){console.log("err createWebRTC ",e)})}.bind(this),1e4)}}},m=(s("6ure"),s("KHd+")),D=Object(m.a)(y,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"connection"},[s("h1",[e._v("Connection Handler")]),e._v(" "),e.loading?s("p",[e._v("Loading...")]):e._e(),e._v(" "),e.answer?s("p",[e._v(e._s(e.answer))]):e._e(),e._v(" "),s("p",[e._v(e._s(e.connection_url))]),e._v(" "),e.creating?s("div",[e.waiting_for_connection?e._e():s("el-button",{on:{click:e.createOffer}},[e._v("createOffer")])],1):e._e(),e._v(" "),s("div",{attrs:{id:"element"}},[e._v("\n        Hi. I'm #element.\n    ")]),e._v(" "),e.connected?s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.new_message,expression:"new_message"}],attrs:{type:"text"},domProps:{value:e.new_message},on:{input:function(t){t.target.composing||(e.new_message=t.target.value)}}}),e._v(" "),s("button",{on:{click:e.sendMessage}},[e._v("Send")]),e._v(" "),s("ul",e._l(e.messages,function(t,o){return s("li",{key:o},[e._v(e._s(t))])}))]):e._e()])},[],!1,null,null,null);D.options.__file="ConnectionHandler.vue";t.a=D.exports},rfXi:function(e,t,s){e.exports={default:s("myGB"),__esModule:!0}},zrg5:function(e,t,s){"use strict";var o={},a=(s("0AoE"),s("KHd+")),n=Object(a.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("nav",{staticClass:"main-nav"},[t("router-link",{staticClass:"nav-item nav-item--logo",attrs:{to:"/","exact-active-class":"active"}},[t("div",{staticClass:"logo"}),this._v(" "),t("div",{staticClass:"logo-wrapper"},[t("img",{staticClass:"logo",attrs:{alt:"online marketplace app",src:s("mxmt")}})])]),this._v(" "),t("div",{staticClass:"nav-menu"},[t("router-link",{staticClass:"nav-item",attrs:{to:"/login","active-class":"active"}},[t("span",[this._v("Demo Login")])])],1)],1)},[],!1,null,null,null);n.options.__file="index.vue";t.a=n.exports}}]);